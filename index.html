<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LED Calculator Pro (Тест)</title>
  <style>
    :root {
      --primary: #00F5FF;
      --dark: #0F172A;
      --gray: #334155;
    }
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--dark);
      color: white;
      margin: 0;
      padding: 0;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 100vh;
    }
    .calculator {
      padding: 2rem;
      background: rgba(15, 23, 42, 0.85);
      backdrop-filter: blur(8px);
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }
    .form-group {
      margin-bottom: 1rem;
    }
    .form-group input, .form-group select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.25rem;
      border: none;
      border-radius: 6px;
      background: #1e293b;
      color: white;
    }
    #calculate-btn {
      width: 100%;
      background: var(--primary);
      color: #0F172A;
      border: none;
      padding: 0.75rem;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 1rem;
    }
    .result {
      margin-top: 1.5rem;
      background: #1e293b;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    }
    .visualization {
      position: relative;
      background: radial-gradient(circle at center, #1E293B 0%, var(--dark) 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .letter-container {
      position: relative;
      width: 300px;
      height: 400px;
    }
    .led {
      position: absolute;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: all 0.3s ease;
    }
    .led.single { background: var(--primary); box-shadow: 0 0 10px 2px var(--primary); }
    .led.double { background: #FF00AA; box-shadow: 0 0 10px 2px #FF00AA; }
    .led.triple { background: #00FFAA; box-shadow: 0 0 10px 2px #00FFAA; }
    .letter-outline {
      position: absolute;
      font-size: 200px;
      font-weight: bold;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 100%;
      color: rgba(255,255,255,0.05);
      pointer-events: none;
    }
    .language-switcher {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 100;
    }
    .language-btn {
      background: var(--gray);
      color: white;
      border: none;
      padding: 5px 10px;
      margin: 0 2px;
      cursor: pointer;
      border-radius: 4px;
    }
    .language-btn.active {
      background: var(--primary);
      color: var(--dark);
    }
    .badge {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(255,255,255,0.1);
      padding: 6px 12px;
      font-size: 12px;
      border-radius: 6px;
      backdrop-filter: blur(4px);
    }
  </style>
</head>
<body>
  <div class="language-switcher">
    <button class="language-btn active" data-lang="ru">Рус</button>
    <button class="language-btn" data-lang="kz">Қаз</button>
  </div>

  <div class="container">
    <div class="calculator">
      <h1><span data-i18n="title">LED CALCULATOR</span> <span style="color: var(--primary)">PRO</span></h1>

      <div class="form-group">
        <label data-i18n="letterText">Текст буквы:</label>
        <input type="text" id="letter-text" value="A" maxlength="1" oninput="validateInput(this)">
      </div>

      <div class="form-group">
        <label data-i18n="ledType">Тип диодов:</label>
        <select id="led-type">
          <option value="single">Одноточечные (5мм)</option>
          <option value="double">Двухточечные (10мм)</option>
          <option value="triple">Трёхточечные (15мм)</option>
        </select>
      </div>

      <div class="form-group">
        <label data-i18n="dimensions">Размеры (см):</label>
        <div style="display: flex; gap: 10px;">
          <input type="number" id="width" placeholder="Ширина" value="50">
          <input type="number" id="height" placeholder="Высота" value="70">
        </div>
      </div>

      <div class="form-group">
        <label data-i18n="lightingType">Тип свечения:</label>
        <select id="lighting-type">
          <option value="front">Только лицевая сторона</option>
          <option value="both">Две стороны</option>
          <option value="contour">Только контур</option>
        </select>
      </div>

      <button id="calculate-btn" data-i18n="calculate">РАССЧИТАТЬ</button>

      <div class="result">
        <h3 data-i18n="result">Результат:</h3>
        <div id="led-count">0</div>
        <div id="power-info">~ 0W</div>
        <div id="price-info" style="margin-top: 10px;"></div>
      </div>
    </div>

    <div class="visualization">
      <div class="letter-container" id="letter-visual">
        <div class="letter-outline" id="letter-outline">A</div>
      </div>
    </div>
  </div>

  <div class="badge">Прототип · Тестовая версия</div>

  <script>
    document.getElementById('calculate-btn').addEventListener('click', calculate);

    function validateInput(input) {
      const letter = input.value;
      if (!/^[а-яА-ЯёЁa-zA-Z]$/.test(letter) && letter !== '') {
        input.value = '';
        alert('Введите одну букву');
      }
    }

    function calculate() {
      const letter = document.getElementById('letter-text').value.toUpperCase() || 'A';
      const type = document.getElementById('led-type').value;
      const width = parseFloat(document.getElementById('width').value);
      const height = parseFloat(document.getElementById('height').value);
      const lighting = document.getElementById('lighting-type').value;

      document.getElementById('letter-outline').textContent = letter;

      const ledCount = Math.round((width + height) * (type === 'single' ? 1.5 : type === 'double' ? 1.2 : 1));
      const power = (ledCount * (type === 'single' ? 0.1 : type === 'double' ? 0.15 : 0.2)).toFixed(1);
      const price = (ledCount * (type === 'single' ? 50 : type === 'double' ? 80 : 120)).toLocaleString();

      document.getElementById('led-count').textContent = `Необходимо диодов: ${ledCount}`;
      document.getElementById('power-info').textContent = `Потребляемая мощность: ~ ${power}W`;
      document.getElementById('price-info').textContent = `Примерная стоимость: ${price} ₸`;

      generateLetterVisual(letter, type, width, height, lighting);
    }

    function generateLetterVisual(letter, type, width, height, lighting) {
      const container = document.getElementById('letter-visual');
      container.querySelectorAll('.led').forEach(el => el.remove());

      const scale = Math.min(300 / width, 400 / height);
      const cols = Math.floor(width / 5);
      const rows = Math.floor(height / 5);

      if (lighting === 'contour') {
        for (let i = 0; i < 360; i += 10) {
          const angle = i * (Math.PI / 180);
          const x = 50 + Math.cos(angle) * 30;
          const y = 50 + Math.sin(angle) * 30;
          addLED(container, x, y, type);
        }
      } else {
        for (let row = 0; row < rows; row++) {
          for (let col = 0; col < cols; col++) {
            const x = (col / (cols - 1)) * 100;
            const y = (row / (rows - 1)) * 100;
            addLED(container, x, y, type);
            if (lighting === 'both') {
              addLED(container, x, y, type, true);
            }
          }
        }
      }
    }

    function addLED(container, x, y, type, back = false) {
      const led = document.createElement('div');
      led.className = `led ${type}`;
      led.style.left = `${x}%`;
      led.style.top = `${y}%`;
      led.style.width = type === 'single' ? '8px' : type === 'double' ? '12px' : '16px';
      led.style.height = led.style.width;
      if (back) led.style.opacity = '0.5';
      container.appendChild(led);
    }

    calculate();
  </script>
</body>
</html>
